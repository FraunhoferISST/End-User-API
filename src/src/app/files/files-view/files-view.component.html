<!--
    Copyright (c) 2025 Fraunhofer-Gesellschaft zur Förderung der angewandten Forschung e.V.

    This program and the accompanying materials are made available under the
    terms of the Apache License, Version 2.0 which is available at
    https://www.apache.org/licenses/LICENSE-2.0

    SPDX-License-Identifier: Apache-2.0

    Contributors:
         Fraunhofer-Gesellschaft zur Förderung der angewandten Forschung e.V. - initial API and implementation
-->
<div class="flex flex-col max-h-full">

  <div class="mb-4">
    <div class="flex flex-1">
      <lib-filter-input
        placeholder="Filter for Name or Filetype ..."
        [focusShortcut]="['Alt', 'j']"
        class="mr-4 grow"
        (inputChange)="filter($event)"
      ></lib-filter-input>
      <lib-item-count-selector
        class="mr-4"
        [currentItemCount]="pageItemCount"
        (itemCountChanged)="pageItemCount = $event"
      ></lib-item-count-selector>
      <lib-pagination
        [items]="filteredFiles$ | async"
        [pageItemCount]="pageItemCount"
        (pageItems)="paginationEvent($event)"
        class="shadow-xl rounded-2xl bg-base-300 [&_button:hover]:bg-base-100 [&_.join>button]:first:rounded-l-2xl [&_.join>button]:last:rounded-r-2xl"
      ></lib-pagination>
    </div>
  </div>


  <div class="overflow-auto bg-base-300 rounded-2xl shadow-xl min-h-0">
    <table class="table table-pin-rows h-full">
      <thead class="">
      <tr class="bg-base-300 shadow-md">
        <th>Name</th>
        <th>Last Updated</th>
        <th>Filetype</th>
        <th>Filesize</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
        @if ((files$ | async)!.length === 0) {
          <td colspan="5" class="text-center p-4 opacity-50">No files yet!</td>
        } @else {
          @for (file of pageFiles$ | async; track file.name) {
            <tr>
              <td><b>{{ file.name }}</b></td>
              <td>
                <span class="badge badge-lg badge-soft">{{ file.updated.toUTCString() | date: 'dd.MM.yyyy - HH:mm:ss' }}</span>
              </td>
              <td>
                <span class="badge badge-info badge-soft">{{ file.extension }}</span>
              </td>
              <td>{{ file.size }}</td>
              <td></td>
            </tr>
          }
        }
      </tbody>
    </table>
  </div>
</div>
